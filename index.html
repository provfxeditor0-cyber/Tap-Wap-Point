<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Rewards & Games</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- AdMaven Code -->
    <meta name='admaven-placement' content='Bqjw7qjY7'>
    
    <style>
        /* --- GLOBAL APP STYLES --- */
        :root {
            --primary-color: #6200ea;
            --primary-dark: #3700b3;
            --secondary-color: #03dac6;
            --bg-color: #f8f9fa;
            --white: #ffffff;
            --text-color: #333;
            --gray: #888;
            --red: #ff3b30;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* HEADER */
        header {
            background: linear-gradient(to right, var(--primary-color), var(--primary-dark));
            color: var(--white);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 10;
        }

        header h1 {
            font-size: 1.3rem;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        /* --- UPDATED INFO BUTTON (FAINTER VISIBILITY) --- */
        .info-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.3);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            font-family: serif;
            transition: all 0.3s ease;
            display: none;
            backdrop-filter: blur(2px);
            opacity: 0.4;
        }

        .info-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            color: rgba(255, 255, 255, 0.6);
            border-color: rgba(255, 255, 255, 0.4);
            opacity: 0.7;
        }

        /* SAVED STATUS INDICATOR */
        .save-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #4CAF50;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
            z-index: 1000;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(76, 175, 80, 0.3);
        }

        .save-indicator.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* MAIN CONTENT AREA */
        .app-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            padding-bottom: 100px;
            position: relative;
        }

        .page {
            display: none;
            animation: fadeIn 0.4s ease forwards;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- BALANCE CARD --- */
        .balance-card {
            background: linear-gradient(135deg, var(--primary-color), #9d46ff);
            color: white;
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 25px;
            box-shadow: 0 8px 20px rgba(98, 0, 234, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .balance-card::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 10%, transparent 10.5%),
                        radial-gradient(circle, rgba(255,255,255,0.1) 10%, transparent 10.5%);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
            opacity: 0.3;
            pointer-events: none;
        }

        .balance-amount {
            font-size: 2.5rem;
            font-weight: 800;
            margin: 10px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        /* --- IMPROVED GAME UI STYLES --- */
        .game-section {
            background: var(--white);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            border: 1px solid #e0e0e0;
        }

        .game-title {
            font-size: 1.1rem;
            color: var(--primary-dark);
            margin-bottom: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Enhanced Target Data Box */
        .target-data {
            background: linear-gradient(135deg, #0f3460 0%, #1a1a2e 100%);
            background-image: linear-gradient(135deg, #0f3460 0%, #1a1a2e 100%), 
                              repeating-linear-gradient(45deg, rgba(255,255,255,0.03) 0px, rgba(255,255,255,0.03) 2px, transparent 2px, transparent 4px);
            background-blend-mode: overlay;
            color: white;
            border-radius: 16px;
            padding: 20px 25px;
            margin-bottom: 25px;
            border: 1px solid #e94560;
            box-shadow: inset 0 0 20px rgba(233, 69, 96, 0.2);
            position: relative;
            transition: all 0.3s ease;
        }

        .target-data.data-changing {
            opacity: 0.6;
            transform: scale(0.99);
            filter: blur(1px);
        }

        .data-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
        }
        
        .data-item:last-child { border-bottom: none; }

        .data-label { color: #b8b8d1; font-size: 0.95rem; font-weight: 500; }
        .data-value { font-weight: 700; font-size: 1.15rem; color: #fff; letter-spacing: 1px; text-shadow: 0 0 5px rgba(255,255,255,0.3); }

        /* Improved Game Inputs */
        .game-input-group { margin-bottom: 18px; }
        .game-input-group label { 
            display: block; margin-bottom: 8px; color: #555; font-weight: 600; font-size: 0.9rem; 
        }
        .game-input-group input {
            width: 100%; 
            padding: 14px; 
            border: 2px solid #eee; 
            background: #f9f9f9;
            border-radius: 12px; 
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        .game-input-group input:focus { 
            border-color: var(--primary-color); 
            background: var(--white);
            box-shadow: 0 0 0 4px rgba(98, 0, 234, 0.1);
            outline: none; 
        }

        /* Improved Check Button */
        .check-btn {
            background: linear-gradient(to right, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            padding: 16px;
            width: 100%;
            border-radius: 12px;
            font-weight: 800;
            font-size: 1.05rem;
            letter-spacing: 0.5px;
            cursor: pointer;
            box-shadow: 0 6px 15px rgba(98, 0, 234, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            overflow: hidden;
        }
        .check-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(98, 0, 234, 0.4); }
        .check-btn:active { transform: translateY(1px); box-shadow: 0 2px 10px rgba(98, 0, 234, 0.3); }

        /* --- STANDARD FORM ELEMENTS (Buy/Redeem) --- */
        .form-group {
            background: var(--white);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            position: relative;
        }
        .standard-label { display: block; margin-bottom: 10px; color: var(--gray); font-weight: 600; font-size: 0.9rem; }
        select, .standard-input {
            width: 100%; padding: 14px; border: 1px solid #ddd; border-radius: 10px; font-size: 1rem; outline: none; background: #fafafa; transition: border 0.3s;
            position: relative;
            z-index: 1;
        }
        select:focus, .standard-input:focus { border-color: var(--primary-color); background: #fff; }

        .cost-display {
            background-color: #ede7f6; color: var(--primary-dark); padding: 15px; border-radius: 10px; 
            font-weight: bold; text-align: center; margin-bottom: 20px; border: 1px solid #d1c4e9; font-size: 1.1rem;
            position: relative;
        }
        .action-btn {
            width: 100%; padding: 16px; background-color: var(--primary-color); color: white; border: none; 
            border-radius: 12px; font-size: 1.1rem; font-weight: bold; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        /* --- BOTTOM NAV --- */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%; background: var(--white);
            display: flex; justify-content: space-around; padding: 15px 0;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1); z-index: 20; border-top-left-radius: 25px; border-top-right-radius: 25px;
        }
        .nav-item { 
            text-align: center; 
            color: #aaa; 
            cursor: pointer; 
            flex: 1; 
            transition: color 0.3s; 
            position: relative;
        }
        .nav-item.active { color: var(--primary-color); }
        .nav-icon { font-size: 1.5rem; margin-bottom: 4px; display: block; }
        .nav-text { font-size: 0.75rem; font-weight: 700; }

        /* --- WATCH PAGE STYLES --- */
        .watch-ad-section {
            background: linear-gradient(135deg, #ff7e5f, #feb47b);
            border-radius: 20px;
            padding: 30px 20px;
            text-align: center;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(255, 126, 95, 0.3);
            color: white;
        }

        .watch-ad-title {
            font-size: 1.4rem;
            font-weight: 800;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .ad-reward {
            font-size: 2rem;
            font-weight: 900;
            margin: 15px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            color: #ffeb3b;
        }

        .ad-timer {
            font-size: 1.1rem;
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .watch-ad-btn {
            background: linear-gradient(to right, #ff416c, #ff4b2b);
            color: white;
            border: none;
            padding: 18px;
            width: 100%;
            border-radius: 15px;
            font-weight: 800;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(255, 65, 108, 0.4);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .watch-ad-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(255, 65, 108, 0.5);
        }

        .watch-ad-btn:active {
            transform: translateY(1px);
        }

        .watch-ad-btn.disabled {
            background: linear-gradient(to right, #cccccc, #999999);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .ad-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border: 2px solid #e0e0e0;
            min-height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .countdown-timer {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--primary-color);
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            display: none;
        }

        /* --- MODALS --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8);
            display: none; justify-content: center; align-items: center; z-index: 1000; padding: 20px;
            backdrop-filter: blur(5px);
        }
        .modal-box {
            background: var(--white); width: 100%; max-width: 380px; padding: 30px; border-radius: 25px;
            text-align: center; position: relative; animation: popUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }
        @keyframes popUp { from{transform: scale(0.8) translateY(20px); opacity:0;} to{transform: scale(1) translateY(0); opacity:1;} }
        
        .result-status { font-size: 1.3rem; font-weight: 800; margin-bottom: 20px; padding: 15px; border-radius: 12px; }
        .success { color: #006400; background: #d4edda; border: 1px solid #c3e6cb; }
        .error { color: #721c24; background: #f8d7da; border: 1px solid #f5c6cb; }
        
        .comparison-box { background: #f1f3f5; padding: 15px; border-radius: 12px; margin: 20px 0; text-align: left; font-size: 0.95rem; border: 1px solid #e9ecef;}
        .comp-row { display: flex; justify-content: space-between; margin-bottom: 10px; border-bottom: 1px solid #dde2e6; padding-bottom: 8px; }
        .comp-row:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0;}
        .match-yes { color: #28a745; font-size: 1.2rem; }
        .match-no { color: #dc3545; font-size: 1.2rem; }

        .modal-btn {
            width: 100%; padding: 15px; border: none; border-radius: 12px; font-weight: 800; font-size: 1rem; cursor: pointer; margin-top: 15px; display: flex; align-items: center; justify-content: center; gap: 10px; transition: transform 0.2s;
        }
        .modal-btn:hover { transform: translateY(-3px); }
        .claim-btn { background: linear-gradient(to right, #e94560, #ff6b8b); color: white; box-shadow: 0 5px 15px rgba(233, 69, 96, 0.4); }
        .retry-btn { background: linear-gradient(to right, #343a40, #495057); color: white; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }

        /* Info Modal specifics */
        .info-modal-box {
            background: white; width: 90%; max-width: 320px; padding: 25px; border-radius: 20px; position: relative; text-align: center;
        }
        .close-info { position: absolute; top: 15px; right: 20px; font-size: 1.8rem; cursor: pointer; color: #aaa; transition: color 0.3s;}
        .close-info:hover { color: var(--red); }

        /* Ad banner styles */
        .ad-banner {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 15px;
            text-align: center;
            border: 2px dashed #ddd;
            font-size: 0.9rem;
            color: #666;
        }
        
        /* AdMaven Ad Container */
        .admaven-ad {
            width: 100%;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f5f5f5;
            border-radius: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>

    <div class="save-indicator" id="saveIndicator">
        <i class="fas fa-check-circle"></i>
        <span>Points Saved!</span>
    </div>

    <header>
        <h1 id="page-title">Home</h1>
        <div class="info-btn" id="infoBtn">i</div>
    </header>

    <div class="app-content">
        
        <div id="home-page" class="page active">
            <div class="balance-card">
                <p style="font-weight: 600; opacity: 0.9;">Your Balance</p>
                <div class="balance-amount"><span id="user-points">0</span> Pts</div>
                <p style="font-size: 0.9rem; opacity: 0.9; font-weight: 500;"><i class="fas fa-arrow-down"></i> Play below to earn points!</p>
            </div>

            <!-- AdMaven Ad Banner -->
            <div class="ad-banner">
                <p><i class="fas fa-ad"></i> Advertisement</p>
                <div class="admaven-ad" id="admaven-banner-home">
                    <!-- AdMaven ads will load here -->
                    <p>Advertisement loading...</p>
                </div>
            </div>

            <div class="game-section">
                <div class="game-title"><i class="fas fa-shield-alt"></i> Village Code Validator</div>
                
                <div class="target-data" id="target-data-box">
                    <div class="data-item">
                        <span class="data-label"><i class="fas fa-user-circle"></i> Name:</span>
                        <span class="data-value" id="target-name">...</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label"><i class="fas fa-map-marker-alt"></i> Village:</span>
                        <span class="data-value" id="target-village">...</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label"><i class="fas fa-fingerprint"></i> Code:</span>
                        <span class="data-value" id="target-code">...</span>
                    </div>
                </div>

                <div class="game-input-group">
                    <label>Enter Name</label>
                    <input type="text" id="game-name" placeholder="Type the name exactly as shown" autocomplete="off">
                </div>
                <div class="game-input-group">
                    <label>Enter Village</label>
                    <input type="text" id="game-village" placeholder="Type the village name" autocomplete="off">
                </div>
                <div class="game-input-group">
                    <label>Enter Code</label>
                    <input type="text" id="game-code" placeholder="e.g. A1234" autocomplete="off">
                </div>

                <button class="check-btn" onclick="checkGameResult()">
                    <i class="fas fa-check-double"></i> VERIFY & EARN
                </button>
            </div>
            <div style="height: 30px;"></div>
        </div>

        <div id="buy-page" class="page">
            <div class="balance-card" style="background: linear-gradient(135deg, #ff7e5f, #feb47b);">
                <p>Buy Social Services</p>
                <h2 class="balance-amount">Exchange Points</h2>
            </div>

            <!-- AdMaven Ad Banner -->
            <div class="ad-banner">
                <p><i class="fas fa-ad"></i> Advertisement</p>
                <div class="admaven-ad" id="admaven-banner-buy">
                    <!-- AdMaven ads will load here -->
                    <p>Advertisement loading...</p>
                </div>
            </div>

            <div class="form-group">
                <label class="standard-label">Select Service</label>
                <select id="service-select">
                    <option value="insta_follow" data-cost="1000" data-qty="100">INSTA FOLLOW</option>
                    <option value="insta_like" data-cost="1000" data-qty="500">INSTA LIKE</option>
                    <option value="insta_view" data-cost="1000" data-qty="5000">INSTA VIEW</option>
                    <option value="yt_sub" data-cost="1500" data-qty="100">YT SUBSCRIBE</option>
                    <option value="yt_like" data-cost="1000" data-qty="400">YT LIKE</option>
                    <option value="yt_view" data-cost="1000" data-qty="800">YT VIEW</option>
                    <option value="fb_follow" data-cost="1000" data-qty="100">FB FOLLOW</option>
                    <option value="fb_like" data-cost="1000" data-qty="500">FB LIKE</option>
                    <option value="fb_view" data-cost="1000" data-qty="4000">FB VIEW</option>
                </select>
            </div>

            <div class="cost-display" id="rate-display">1000 points = 100 follow</div>

            <div class="form-group">
                <label class="standard-label">Enter Link (ID/Post URL)</label>
                <input type="text" class="standard-input" id="campaign-link" placeholder="https://...">
            </div>

            <button class="action-btn" onclick="createCampaign()"><i class="fas fa-rocket"></i> Create Campaign</button>
        </div>

        <div id="watch-page" class="page">
            <div class="balance-card" style="background: linear-gradient(135deg, #4CAF50, #2E7D32);">
                <p>Watch Ads & Earn</p>
                <h2 class="balance-amount"><span id="watch-balance">0</span> Pts</h2>
            </div>

            <div class="watch-ad-section">
                <div class="watch-ad-title">
                    <i class="fas fa-video"></i> WATCH AD & GET COINS
                </div>
                <div class="ad-reward">30 <i class="fas fa-coins"></i></div>
                <div class="ad-timer">
                    <i class="fas fa-clock"></i> 20 Seconds Ad
                </div>
                <p>Watch a short video ad to earn 30 coins instantly!</p>
                
                <!-- Ad Container -->
                <div class="ad-container">
                    <div class="admaven-ad" id="admaven-video-ad">
                        <!-- AdMaven video ad will load here -->
                        <p>Video advertisement will play here</p>
                    </div>
                    <div class="countdown-timer" id="countdown-timer">20</div>
                </div>
                
                <button class="watch-ad-btn" id="watch-ad-btn" onclick="startWatchingAd()">
                    <i class="fas fa-play-circle"></i> WATCH AD & GET 30 COINS
                </button>
            </div>

            <!-- Additional Ad Banner -->
            <div class="ad-banner" style="margin-top: 20px;">
                <p><i class="fas fa-ad"></i> More Ads Available</p>
                <div class="admaven-ad" id="admaven-banner-watch">
                    <!-- AdMaven ads will load here -->
                    <p>Advertisement loading...</p>
                </div>
            </div>

            <div class="game-section" style="margin-top: 20px;">
                <div class="game-title"><i class="fas fa-lightbulb"></i> How it works?</div>
                <ul style="padding-left: 20px; line-height: 1.6;">
                    <li>Click "Watch Ad & Get 30 Coins" button</li>
                    <li>Watch the ad for 20 seconds</li>
                    <li>Get 30 coins added to your balance instantly</li>
                    <li>You can watch unlimited ads daily</li>
                </ul>
            </div>
        </div>

        <div id="wallet-page" class="page">
            <div class="balance-card">
                <p>Current Balance</p>
                <h2 id="wallet-balance" class="balance-amount">0</h2>
            </div>

            <!-- AdMaven Ad Banner -->
            <div class="ad-banner">
                <p><i class="fas fa-ad"></i> Advertisement</p>
                <div class="admaven-ad" id="admaven-banner-wallet">
                    <!-- AdMaven ads will load here -->
                    <p>Advertisement loading...</p>
                </div>
            </div>

            <div class="form-group">
                <label class="standard-label">Enter Points to Redeem</label>
                <input type="number" class="standard-input" id="redeem-coins" placeholder="Min 5000" oninput="calculateInr()">
                <div style="color:var(--red); font-size:0.85rem; display:none; margin-top:8px; font-weight:500;" id="redeem-error"><i class="fas fa-exclamation-circle"></i> Minimum redeem is 5000 points.</div>
            </div>

            <div class="cost-display" id="inr-display" style="background:#e0f2f1; color:#00695c; border-color:#b2dfdb;">You will receive: ₹0</div>

            <div class="form-group">
                <label class="standard-label">Payment Email / UPI</label>
                <input type="email" class="standard-input" id="redeem-email" placeholder="example@email.com">
            </div>

            <button class="action-btn" onclick="redeemPoints()" style="background: var(--secondary-color);"><i class="fas fa-money-bill-wave"></i> REDEEM NOW</button>
        </div>

    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('home')">
            <span class="nav-icon"><i class="fas fa-home"></i></span>
            <span class="nav-text">HOME</span>
        </div>
        <div class="nav-item" onclick="switchTab('buy')">
            <span class="nav-icon"><i class="fas fa-shopping-cart"></i></span>
            <span class="nav-text">BUY</span>
        </div>
        <div class="nav-item" onclick="switchTab('watch')">
            <span class="nav-icon"><i class="fas fa-video"></i></span>
            <span class="nav-text">WATCH</span>
        </div>
        <div class="nav-item" onclick="switchTab('wallet')">
            <span class="nav-icon"><i class="fas fa-wallet"></i></span>
            <span class="nav-text">WALLET</span>
        </div>
    </div>

    <div class="modal-overlay" id="gameResultModal">
        <div class="modal-box">
            <div id="game-status-msg" class="result-status">Checking...</div>
            
            <div class="comparison-box">
                <div class="comp-row">
                    <span>Name:</span> <span id="res-name-match">-</span>
                </div>
                <div class="comp-row">
                    <span>Village:</span> <span id="res-village-match">-</span>
                </div>
                <div class="comp-row">
                    <span>Code:</span> <span id="res-code-match">-</span>
                </div>
            </div>

            <div id="win-area" style="display:none;">
                <p style="color:#e67700; font-weight:800; font-size: 1.2rem; margin-bottom:15px;"><i class="fas fa-coins"></i> Reward: 25 Points</p>
                <button class="modal-btn claim-btn" onclick="claimReward()">Claim Reward</button>
            </div>
            
            <div id="lose-area" style="display:none;">
                 <p style="color:#721c24; margin-bottom:15px;">Make sure all fields match exactly.</p>
                <button class="modal-btn retry-btn" onclick="resetGame()"><i class="fas fa-redo-alt"></i> Try Again</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="infoModal">
        <div class="info-modal-box">
            <span class="close-info" onclick="document.getElementById('infoModal').style.display='none'">&times;</span>
            <h3 style="color:var(--red); display:flex; align-items:center; justify-content:center; gap:10px;"><i class="fas fa-exclamation-triangle"></i> NOTE</h3>
            <p style="font-weight:800; margin:20px 0; font-size:1.1rem;">REWARDS ARE NOT GUARANTEED</p>
            <p style="font-size:0.9rem; color:#666; line-height:1.5;">Campaigns and redemptions are processed subject to availability and network conditions.</p>
        </div>
    </div>

    <div class="modal-overlay" id="adRewardModal">
        <div class="modal-box">
            <div class="result-status success">
                <i class="fas fa-trophy"></i> REWARD EARNED!
            </div>
            <div style="padding: 20px;">
                <div style="font-size: 3rem; color: #FFD700; margin: 20px 0;">
                    <i class="fas fa-coins"></i>
                </div>
                <h2 style="color: #4CAF50; margin-bottom: 10px;">+30 Coins Added!</h2>
                <p>You have successfully watched the ad and earned 30 coins.</p>
                <p style="font-weight: bold; margin-top: 15px;">Your new balance: <span id="new-balance">0</span> coins</p>
            </div>
            <button class="modal-btn claim-btn" onclick="closeAdRewardModal()">
                <i class="fas fa-check-circle"></i> GREAT! WATCH MORE
            </button>
        </div>
    </div>

    <script>
        // --- GLOBAL VARIABLES ---
        let currentPoints = 0; 
        let isWatchingAd = false;
        let adTimer = null;
        let secondsLeft = 20;
        
        // --- GAME DATA ARRAYS ---
        const firstNames = ["Ava", "Emma", "Sophia", "Olivia", "Isabella", "Mia", "Charlotte", "Amelia", "Harper", "Evelyn", "Raj", "Amit", "Priya", "Rahul", "Vikram", "Anita"];
        const lastNames = ["Lee", "Smith", "Johnson", "Williams", "Brown", "Jones", "Garcia", "Miller", "Kumar", "Singh", "Sharma", "Verma", "Patel", "Gupta"];
        const fakeVillages = ["Graffelfree", "Zorblaxia", "Quibbleton", "Fizzletown", "Rampur", "Dholakpur", "Bumbleburg", "Noodleham", "Chandrapur", "Sundarnagar"];

        // Game State Variables
        let targetName = "";
        let targetVillage = "";
        let targetCode = "";

        // --- LOCALSTORAGE FUNCTIONS ---
        function savePointsToStorage() {
            localStorage.setItem('userPoints', currentPoints.toString());
            showSaveIndicator();
        }

        function loadPointsFromStorage() {
            const savedPoints = localStorage.getItem('userPoints');
            if (savedPoints !== null) {
                currentPoints = parseInt(savedPoints);
            } else {
                currentPoints = 0;
                savePointsToStorage(); // Initialize with 0
            }
        }

        function showSaveIndicator() {
            const indicator = document.getElementById('saveIndicator');
            indicator.classList.add('show');
            setTimeout(() => {
                indicator.classList.remove('show');
            }, 2000);
        }

        function updatePoints(amount) {
            currentPoints += amount;
            savePointsToStorage();
            updateBalanceUI();
        }

        // --- INITIALIZATION ---
        window.onload = function() {
            loadPointsFromStorage();
            updateBalanceUI();
            generateGameData();
            
            // Initialize AdMaven ads
            initializeAdMavenAds();
            
            // Auto-save every 30 seconds as backup
            setInterval(savePointsToStorage, 30000);
        };

        function updateBalanceUI() {
            document.getElementById('user-points').innerText = currentPoints;
            document.getElementById('wallet-balance').innerText = currentPoints;
            document.getElementById('watch-balance').innerText = currentPoints;
        }

        // --- TAB SWITCHING ---
        function switchTab(tabName) {
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));

            const navItems = document.querySelectorAll('.nav-item');
            const infoBtn = document.getElementById('infoBtn');

            if(tabName === 'home') {
                navItems[0].classList.add('active');
                document.getElementById('home-page').classList.add('active');
                document.getElementById('page-title').innerText = "Home";
                infoBtn.style.display = 'none';
            }
            else if(tabName === 'buy') {
                navItems[1].classList.add('active');
                document.getElementById('buy-page').classList.add('active');
                document.getElementById('page-title').innerText = "Buy Services";
                infoBtn.style.display = 'flex';
            }
            else if(tabName === 'watch') {
                navItems[2].classList.add('active');
                document.getElementById('watch-page').classList.add('active');
                document.getElementById('page-title').innerText = "Watch Ads";
                infoBtn.style.display = 'flex';
                resetAdTimer();
            }
            else if(tabName === 'wallet') {
                navItems[3].classList.add('active');
                document.getElementById('wallet-page').classList.add('active');
                document.getElementById('page-title').innerText = "Wallet";
                infoBtn.style.display = 'flex';
            }
        }

        // --- ADMAVEN ADS INITIALIZATION ---
        function initializeAdMavenAds() {
            // AdMaven ads are initialized via meta tag
            // Additional AdMaven script can be added here if needed
            console.log("AdMaven ads initialized");
        }

        // --- WATCH AD FUNCTIONALITY ---
        function startWatchingAd() {
            if (isWatchingAd) return;
            
            isWatchingAd = true;
            secondsLeft = 20;
            
            const watchBtn = document.getElementById('watch-ad-btn');
            const countdownTimer = document.getElementById('countdown-timer');
            const adContainer = document.getElementById('admaven-video-ad');
            
            watchBtn.classList.add('disabled');
            watchBtn.innerHTML = '<i class="fas fa-hourglass-half"></i> WATCHING AD...';
            
            // Hide ad content and show countdown
            if (adContainer) {
                adContainer.style.opacity = '0.5';
                adContainer.style.pointerEvents = 'none';
            }
            
            countdownTimer.style.display = 'block';
            
            adTimer = setInterval(() => {
                secondsLeft--;
                countdownTimer.textContent = secondsLeft;
                
                if (secondsLeft <= 0) {
                    finishWatchingAd();
                }
            }, 1000);
        }
        
        function finishWatchingAd() {
            clearInterval(adTimer);
            isWatchingAd = false;
            
            const watchBtn = document.getElementById('watch-ad-btn');
            const countdownTimer = document.getElementById('countdown-timer');
            const adContainer = document.getElementById('admaven-video-ad');
            
            // Reward user and save to storage
            updatePoints(30);
            
            countdownTimer.style.display = 'none';
            if (adContainer) {
                adContainer.style.opacity = '1';
                adContainer.style.pointerEvents = 'auto';
            }
            
            document.getElementById('new-balance').textContent = currentPoints;
            document.getElementById('adRewardModal').style.display = 'flex';
            
            setTimeout(() => {
                watchBtn.classList.remove('disabled');
                watchBtn.innerHTML = '<i class="fas fa-play-circle"></i> WATCH AD & GET 30 COINS';
            }, 1000);
        }
        
        function resetAdTimer() {
            clearInterval(adTimer);
            isWatchingAd = false;
            secondsLeft = 20;
            
            const watchBtn = document.getElementById('watch-ad-btn');
            const countdownTimer = document.getElementById('countdown-timer');
            const adContainer = document.getElementById('admaven-video-ad');
            
            watchBtn.classList.remove('disabled');
            watchBtn.innerHTML = '<i class="fas fa-play-circle"></i> WATCH AD & GET 30 COINS';
            countdownTimer.style.display = 'none';
            countdownTimer.textContent = '20';
            
            if (adContainer) {
                adContainer.style.opacity = '1';
                adContainer.style.pointerEvents = 'auto';
            }
        }
        
        function closeAdRewardModal() {
            document.getElementById('adRewardModal').style.display = 'none';
        }

        // --- GAME LOGIC ---
        function generateGameData() {
            const randFirst = firstNames[Math.floor(Math.random() * firstNames.length)];
            const randLast = lastNames[Math.floor(Math.random() * lastNames.length)];
            targetName = `${randFirst} ${randLast}`;
            targetVillage = fakeVillages[Math.floor(Math.random() * fakeVillages.length)];
            
            const randLetter = String.fromCharCode(65 + Math.floor(Math.random() * 26));
            const randNum = Math.floor(1000 + Math.random() * 9000);
            targetCode = `${randLetter}${randNum}`;

            const box = document.getElementById('target-data-box');
            box.classList.add('data-changing');
            
            setTimeout(() => {
                document.getElementById('target-name').innerText = targetName;
                document.getElementById('target-village').innerText = targetVillage;
                document.getElementById('target-code').innerText = targetCode;
                box.classList.remove('data-changing');
            }, 300);

            document.getElementById('game-name').value = '';
            document.getElementById('game-village').value = '';
            document.getElementById('game-code').value = '';
        }

        function checkGameResult() {
            const inName = document.getElementById('game-name').value.trim();
            const inVillage = document.getElementById('game-village').value.trim();
            const inCode = document.getElementById('game-code').value.trim();

            const isNameMatch = inName === targetName;
            const isVillageMatch = inVillage === targetVillage;
            const isCodeMatch = inCode === targetCode;
            const isWin = isNameMatch && isVillageMatch && isCodeMatch;

            document.getElementById('res-name-match').innerHTML = isNameMatch ? '<i class="fas fa-check-circle match-yes"></i>' : '<i class="fas fa-times-circle match-no"></i>';
            document.getElementById('res-village-match').innerHTML = isVillageMatch ? '<i class="fas fa-check-circle match-yes"></i>' : '<i class="fas fa-times-circle match-no"></i>';
            document.getElementById('res-code-match').innerHTML = isCodeMatch ? '<i class="fas fa-check-circle match-yes"></i>' : '<i class="fas fa-times-circle match-no"></i>';

            const statusMsg = document.getElementById('game-status-msg');
            const winArea = document.getElementById('win-area');
            const loseArea = document.getElementById('lose-area');

            if(isWin) {
                statusMsg.innerHTML = '<i class="fas fa-trophy"></i> PERFECT MATCH!';
                statusMsg.className = "result-status success";
                winArea.style.display = "block";
                loseArea.style.display = "none";
            } else {
                statusMsg.innerHTML = '<i class="fas fa-times-octagon"></i> Mismatch Found';
                statusMsg.className = "result-status error";
                winArea.style.display = "none";
                loseArea.style.display = "block";
            }

            document.getElementById('gameResultModal').style.display = 'flex';
        }

        function claimReward() {
            updatePoints(25);
            document.getElementById('gameResultModal').style.display = 'none';
            generateGameData();
        }

        function resetGame() {
            document.getElementById('gameResultModal').style.display = 'none';
            generateGameData();
        }

        // --- BUY PAGE LOGIC ---
        const serviceSelect = document.getElementById('service-select');
        serviceSelect.addEventListener('change', function() {
            const opt = this.options[this.selectedIndex];
            const cost = opt.getAttribute('data-cost');
            const qty = opt.getAttribute('data-qty');
            document.getElementById('rate-display').innerText = `${cost} points = ${qty} actions`;
        });

        function createCampaign() {
            const link = document.getElementById('campaign-link').value;
            const opt = serviceSelect.options[serviceSelect.selectedIndex];
            const cost = parseInt(opt.getAttribute('data-cost'));
            
            if(!link) return alert("Please enter link");
            
            if(currentPoints >= cost) {
                updatePoints(-cost);
                alert("Campaign Created Successfully!");
                document.getElementById('campaign-link').value = "";
            } else {
                alert("Insufficient Points! Play games to earn more.");
            }
        }

        // --- REDEEM LOGIC ---
        function calculateInr() {
            const coins = document.getElementById('redeem-coins').value;
            const err = document.getElementById('redeem-error');
            const disp = document.getElementById('inr-display');

            if(coins < 5000) {
                err.style.display = 'block';
                disp.innerText = "You will receive: ₹0";
                disp.style.color = "#c62828";
                disp.style.backgroundColor = "#ffcdd2";
                disp.style.borderColor = "#e57373";
            } else {
                err.style.display = 'none';
                disp.innerText = `You will receive: ₹${(coins/1000)*100}`;
                disp.style.color = "#00695c";
                disp.style.backgroundColor = "#e0f2f1";
                disp.style.borderColor = "#b2dfdb";
            }
        }

        function redeemPoints() {
            const coins = parseInt(document.getElementById('redeem-coins').value);
            const email = document.getElementById('redeem-email').value;
            
            if(!coins || coins < 5000) return alert("Minimum 5000 points required");
            if(!email) return alert("Enter payment email");

            if(currentPoints >= coins) {
                updatePoints(-coins);
                alert(`Redemption Request Sent for ₹${(coins/1000)*100}`);
                document.getElementById('redeem-coins').value = "";
                calculateInr();
            } else {
                alert("Insufficient Balance");
            }
        }

        // --- INFO MODAL LOGIC ---
        document.getElementById('infoBtn').addEventListener('click', () => {
            document.getElementById('infoModal').style.display = 'flex';
        });

        // Block copy paste for game
        document.getElementById('target-data-box').addEventListener('copy', (e) => {
            e.preventDefault();
            alert("Copying not allowed! Please type manually.");
        });

        // Save points before page unload
        window.addEventListener('beforeunload', function() {
            savePointsToStorage();
        });
    </script>
</body>
</html>